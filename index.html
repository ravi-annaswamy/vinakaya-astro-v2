<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vinayaka Astro</title>
  
  <!-- Include scripts -->
  <script src="js/constants.js"></script>
  <script src="js/astro_calc.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/cities.js?v=20260212-1"></script>
  <script src="js/sunrise.js"></script>
  <script src="js/dignity_and_table.js"></script>
  <script src="js/dashas.js"></script>
  <script src="js/date_utils.js"></script>
  <script src="js/panchanga.js"></script>
  <script src="js/planets.js"></script>
  <script src="js/planterms2.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- CSS styles -->
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 18px;
    margin: 0;
    background-color: #f4f4f4;
  }

  .report-canvas {
    max-width: 1100px;
    margin: 12px auto 0;
  }

  .report-header {
    background: #ffffff;
    border: 1px solid #e8e8e8;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    display: flex;
    align-items: center;
    gap: 12px;
    text-align: left;
    padding: 10px 12px;
    margin-bottom: 8px;
  }

  .report-header img {
    width: 68px;
    height: 68px;
    flex: 0 0 auto;
  }

  .report-header-text {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .report-title {
    font-size: 22px;
    font-weight: 700;
    margin: 0;
  }

  .report-subtitle {
    font-size: 15px;
    margin: 2px 0 0;
  }

  .report-panel {
    background: #ffffff;
    border: 1px solid #e8e8e8;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    padding: 8px;
    margin-bottom: 8px;
  }

.chart-container {
  display: grid;
  grid-template-columns: minmax(260px, 320px) minmax(260px, 320px) minmax(380px, 1fr);
  gap: 12px;
  align-items: start;
  justify-content: center;
}

.chart-box {
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  padding: 5px; /* reduced from 10px */
  box-sizing: border-box;
  background: #fff;
}

#chartContainer,
#navamsaChartContainer {
  min-height: 330px;
}

#chartContainer svg,
#navamsaChartContainer svg {
  width: 100%;
  max-width: 320px;
  height: auto;
  display: block;
  margin: 0 auto;
}

.nakshatra-box {
  min-width: 0;
  overflow: visible;
}

.nakshatra-box table {
  font-size: 12px;
}

.nakshatra-box th,
.nakshatra-box td {
  padding: 6px;
}

  table {
    width: 100%;
    border-collapse: collapse;
    overflow-x: auto;
    display: block;
  }
  th, td {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
    font-size: 14px;
  }
  th {
    background-color: #f2f2f2;
  }

  .nakshatra-box th,
  .nakshatra-box td {
    font-size: 12px;
    padding: 6px;
  }

  #result table {
    display: table;
    width: 100%;
  }

  @media (max-width: 1120px) {
    .chart-container {
      grid-template-columns: minmax(260px, 1fr) minmax(260px, 1fr);
    }
    .nakshatra-box {
      grid-column: 1 / -1;
    }
  }

  @media (max-width: 760px) {
    .chart-container {
      grid-template-columns: 1fr;
    }
  }

  label, select, input[type="checkbox"], button {
    display: block;
    width: 40%;
    margin-top: 5px;
    margin-bottom: 5px;
    padding: 10px;
    font-size: 16px;
  }
  .form-control {
    margin-bottom: 15px;
  }

  .controls-panel {
    background: #ffffff;
    border: 1px solid #e8e8e8;
    border-radius: 10px;
    padding: 14px;
    max-width: 1100px;
    margin: 0 auto 14px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    align-items: end;
  }

  .controls-panel label,
  .controls-panel select,
  .controls-panel button {
    width: 100%;
    margin: 0;
    box-sizing: border-box;
  }

  select#city {
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 16px;
    background-color: #f9f9f9;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  select#city:focus {
    border-color: #6c63ff;
    box-shadow: 0 0 5px rgba(108, 99, 255, 0.5);
    background-color: #fff;
    outline: none;
  }
  label[for="city"] {
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
    font-size: 15px;
  }

  /* Media query for small screens */
  @media (max-width: 600px) {
    th, td {
      font-size: 12px;
      padding: 5px;
    }
  }

.dasha-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}
.dasha-container .dasha-item {
  flex: 1 1 260px;
}

.dasha-container table {
  border-collapse: collapse;
  min-width: 200px;
}
.dasha-container th, .dasha-container td {
  border: 1px solid #dddddd;
  padding: 6px;
}
.dasha-container th {
  background: #f2f2f2;
}
  .dasha-container table tbody tr:hover {
    background-color: #d0eed0;
    cursor: pointer;
  }

.result-dasha-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  align-items: flex-start;
  margin-top: 20px;
}

#result, #dashasContainer, #antaraContainer {
  min-width: 220px;
  padding: 8px;
  border: 1px solid #eeeeee;
  background-color: #fafafa;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  border-radius: 8px;
  font-size: 13px;
}

#result {
  flex: 1 1 250px;
}

#dashasContainer {
  flex: 1 1 100%;
}

#panchangInfo {
  margin: 0;
  font-size: 14px;
}

.summary-table {
  width: 100%;
  border-collapse: collapse;
  display: table;
}

.summary-table th,
.summary-table td {
  border: 1px solid #dddddd;
  padding: 10px;
  font-size: 14px;
  vertical-align: top;
}

.summary-table th {
  width: 180px;
  background: #f5f5f5;
  font-weight: 700;
}

.report-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 4px;
}

.report-actions button {
  width: auto;
  margin: 0;
  padding: 10px 14px;
  border: 1px solid #cccccc;
  border-radius: 8px;
  background: #ffffff;
  cursor: pointer;
}

@page {
  size: A4 landscape;
  margin: 6mm;
}

@media print {
  body {
    background: #fff;
    padding: 0;
    margin: 0;
    font-size: 10px;
  }

  .controls-panel {
    display: none !important;
  }

  .report-actions {
    display: none !important;
  }

  .report-canvas {
    max-width: none;
    width: 100%;
    margin: 0;
  }

  .report-header,
  .report-panel {
    border: 1px solid #cfcfcf;
    box-shadow: none;
    border-radius: 4px;
    padding: 6px;
    margin-bottom: 6px;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .report-header img {
    width: 52px;
    height: 52px;
  }

  .report-title {
    font-size: 16px;
  }

  .report-subtitle {
    font-size: 12px;
  }

  .summary-table th,
  .summary-table td {
    font-size: 10px;
    padding: 4px 6px;
  }

  .chart-container {
    grid-template-columns: minmax(180px, 230px) minmax(180px, 230px) minmax(320px, 1fr);
    gap: 6px;
  }

  #chartContainer,
  #navamsaChartContainer {
    min-height: auto;
  }

  #chartContainer svg,
  #navamsaChartContainer svg {
    max-width: 230px;
  }

  #result table,
  #dashasContainer table {
    display: table;
    width: 100%;
  }

  #result th, #result td,
  #dashasContainer th, #dashasContainer td {
    font-size: 9px;
    padding: 3px 4px;
  }

  .dasha-container {
    gap: 8px;
  }

  .dasha-container .dasha-item {
    flex: 1 1 0;
  }
}
</style>



  <script>
    function setDateToday() {
      var today = new Date();
      var year = today.getFullYear();
      var month = today.getMonth() + 1; // JavaScript months are 0-indexed
      var day = today.getDate();
      var hour = today.getHours();
      var minute = today.getMinutes();

      document.getElementById('year').value = year;
      document.getElementById('month').value = month;
    document.getElementById('day').value = day;
    document.getElementById('hour').value = hour;
    document.getElementById('minute').value = minute;

      const copyBtn = document.getElementById('copyReportBtn');
      if (copyBtn && !window.isSecureContext) {
        copyBtn.title = 'Copy works on HTTPS (for example, GitHub Pages).';
      }
    }

function displayVedicInfo(year, month, day, hour, minute, city) {
  const { sunriseStr, sunsetStr, sunriseMinutes, sunsetMinutes } =
          getLocalSunriseSunset(year, month, day, city);

  const dateStr = `${day}-${month}-${year}`;
  const birthTimeStr = formatAMPM(hour, minute);

  // Day of week 0=Sun…6=Sat in JS
  const weekdayIndex = new Date(year, month-1, day).getDay();
  const vedicWeekday = determineVedicWeekdayLocal(
    hour, minute, sunriseMinutes, sunsetMinutes, weekdayIndex
  );

  document.getElementById('panchangInfo').innerHTML = `
    <table class="summary-table">
      <tr>
        <th>நாள் விவரம்</th>
        <td>நாள்: ${dateStr} ${birthTimeStr} | சூரிய உதயம்: ${sunriseStr}, அஸ்தமனம்: ${sunsetStr} | ${vedicWeekday} பொழுது</td>
      </tr>
      <tr>
        <th>பஞ்சாங்கம்</th>
        <td id="panchangaLine"></td>
      </tr>
    </table>
` ;
}



    // Main driver function

// Refactored calculatePositions with helpers and ES6 syntax
function calculatePositions() {
  // 1. Gather inputs
  const year    = Number(document.getElementById('year').value);
  const month   = Number(document.getElementById('month').value);
  const day     = Number(document.getElementById('day').value);
  const hour    = Number(document.getElementById('hour').value);
  const minutes = Number(document.getElementById('minute').value);
  const city    = document.getElementById('city').value;

  const cityInfo = getCityInfo(city);
  if (!cityInfo) {
    alert('City information not available.');
    return;
  }

  // 2. Compute time and date data
  const timeData = extractTimeData(hour, minutes, cityInfo);
  const dateData = calculateDateData(year, month, day, timeData.time);

  // 3. Calculate planetary positions for birth moment
  const planetaryPositions = calculatePlanetaryPositions(dateData.t, timeData, cityInfo);

  // 4. Add Maanti position
  addMaantiPosition(
    planetaryPositions,
    { year, month, day, hour, minutes, city },
    planetaryPositions
  );

  // 5. Compute positions 12 hours later for retrograde check
  const halfDayInCenturies = 0.5 / 36525;
  const planetaryPositionsLater = calculatePlanetaryPositions(
    dateData.t + halfDayInCenturies,
    timeData,
    cityInfo
  );

  // 6. Display day details and charts/tables
  displayVedicInfo(year, month, day, hour, minutes, city);
  displayChart(planetaryPositions, year, month, day, hour, minutes);
  const navamsaPositions = calculateNavamsaPositions(planetaryPositions);
  displayNavamsaChart(navamsaPositions, dateData);
  displayPlanetaryTable(planetaryPositions, planetaryPositionsLater);
  displayDashas(planetaryPositions, dateData.jd);

  // 7. Calculate panchanga from current and +12h Sun/Moon positions
  renderPanchanga(planetaryPositions, planetaryPositionsLater, hour, minutes);
}

function normalizeAngleDelta(current, next) {
  let diff = next - current;
  if (diff > 180) diff -= 360;
  if (diff < -180) diff += 360;
  return diff;
}

function renderPanchanga(planetaryPositions, planetaryPositionsLater, hour, minutes) {
  const sunNow = planetaryPositions.find(p => p.name === 'சூரியன்');
  const moonNow = planetaryPositions.find(p => p.name === 'சந்திரன்');
  const sunLater = planetaryPositionsLater.find(p => p.name === 'சூரியன்');
  const moonLater = planetaryPositionsLater.find(p => p.name === 'சந்திரன்');

  if (!sunNow || !moonNow || !sunLater || !moonLater) {
    const panchangaLine = document.getElementById('panchangaLine');
    if (panchangaLine) panchangaLine.textContent = '';
    return;
  }

  const halfDay = 0.5;
  const sunSpeed = normalizeAngleDelta(sunNow.longitude, sunLater.longitude) / halfDay;
  const moonSpeed = normalizeAngleDelta(moonNow.longitude, moonLater.longitude) / halfDay;

  // Use local clock time (hours) as base for "end time" display in panchanga.
  const localTimeHours = hour + (minutes / 60);
  const panchanga = calculatePanchanga(
    sunNow.longitude,
    moonNow.longitude,
    sunSpeed,
    moonSpeed,
    localTimeHours
  );

  const panchangaLine = document.getElementById('panchangaLine');
  if (panchangaLine) {
    panchangaLine.textContent = buildPanchangaSentence(
      panchanga.thithi,
      panchanga.yoga,
      panchanga.karana,
      panchanga.paksha,
      panchanga.nakshatraInfo
    );
  }
}

function pad2(num) {
  return String(num).padStart(2, '0');
}

function getBirthStamp() {
  const y = Number(document.getElementById('year').value);
  const m = Number(document.getElementById('month').value);
  const d = Number(document.getElementById('day').value);
  const hh = Number(document.getElementById('hour').value);
  const mm = Number(document.getElementById('minute').value);
  return `${y}${pad2(m)}${pad2(d)}_${pad2(hh)}${pad2(mm)}`;
}

function getCityForFilename() {
  const city = document.getElementById('city').value || 'City';
  return city.replace(/[^a-zA-Z0-9]+/g, '-').replace(/^-+|-+$/g, '') || 'City';
}

function canvasToBlob(canvas, type = 'image/png') {
  return new Promise((resolve) => {
    canvas.toBlob((blob) => resolve(blob), type);
  });
}

function ensureExportDependencies() {
  if (typeof html2canvas === 'undefined') {
    alert('html2canvas failed to load. Check internet access and reload.');
    return false;
  }
  if (!window.jspdf || typeof window.jspdf.jsPDF === 'undefined') {
    alert('jsPDF failed to load. Check internet access and reload.');
    return false;
  }
  return true;
}

async function captureReportCanvas(scale = 3) {
  const source = document.getElementById('reportCanvas');
  const host = document.createElement('div');
  host.style.position = 'fixed';
  host.style.left = '-20000px';
  host.style.top = '0';
  host.style.width = '1400px';
  host.style.background = '#ffffff';
  host.style.zIndex = '-1';

  const clone = source.cloneNode(true);
  clone.removeAttribute('id');
  clone.style.width = '1400px';
  clone.style.maxWidth = '1400px';
  clone.style.margin = '0';
  clone.querySelectorAll('.no-export').forEach(el => el.remove());

  const chartContainer = clone.querySelector('.chart-container');
  if (chartContainer) {
    chartContainer.style.display = 'grid';
    chartContainer.style.gridTemplateColumns = '360px 360px 1fr';
    chartContainer.style.gap = '10px';
    chartContainer.style.alignItems = 'start';
  }

  const rasi = clone.querySelector('#chartContainer');
  const amsa = clone.querySelector('#navamsaChartContainer');
  if (rasi) {
    rasi.style.minHeight = '360px';
    rasi.style.width = '360px';
  }
  if (amsa) {
    amsa.style.minHeight = '360px';
    amsa.style.width = '360px';
  }

  clone.querySelectorAll('#chartContainer svg, #navamsaChartContainer svg').forEach(svg => {
    svg.style.width = '100%';
    svg.style.maxWidth = '360px';
    svg.style.height = 'auto';
  });

  const result = clone.querySelector('#result');
  if (result) {
    result.style.overflow = 'visible';
    result.style.maxHeight = 'none';
  }

  clone.querySelectorAll('#result th, #result td, #dashasContainer th, #dashasContainer td').forEach(el => {
    el.style.fontSize = '11px';
    el.style.padding = '4px';
  });

  host.appendChild(clone);
  document.body.appendChild(host);

  try {
    return await html2canvas(clone, {
      scale,
      useCORS: true,
      backgroundColor: '#ffffff',
      logging: false,
      windowWidth: clone.scrollWidth,
      windowHeight: clone.scrollHeight,
      scrollX: 0,
      scrollY: 0
    });
  } finally {
    host.remove();
  }
}

function downloadCanvasPng(canvas) {
  const link = document.createElement('a');
  link.href = canvas.toDataURL('image/png');
  link.download = `vinayaka-v2-${getBirthStamp()}_${getCityForFilename()}.png`;
  link.click();
}

async function copyReportToClipboard() {
  try {
    if (!ensureExportDependencies()) return;
    if (!window.isSecureContext) {
      alert('Copy requires HTTPS. GitHub Pages uses HTTPS by default.');
      return;
    }
    const canvas = await captureReportCanvas(3);
    if (!navigator.clipboard || typeof ClipboardItem === 'undefined') {
      downloadCanvasPng(canvas);
      alert('Clipboard image copy is not supported in this browser. Downloaded PNG instead.');
      return;
    }

    const blob = await canvasToBlob(canvas, 'image/png');
    if (!blob) {
      alert('Unable to create report image.');
      return;
    }

    await navigator.clipboard.write([
      new ClipboardItem({ 'image/png': blob })
    ]);
    alert('Report copied to clipboard as image.');
  } catch (err) {
    console.error(err);
    alert('Failed to copy report. Please try again.');
  }
}

async function downloadReportPdf() {
  try {
    if (!ensureExportDependencies()) return;
    const canvas = await captureReportCanvas(2.5);
    const imgData = canvas.toDataURL('image/png');

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({
      orientation: 'landscape',
      unit: 'mm',
      format: 'a4',
      compress: true
    });

    const pageWidth = pdf.internal.pageSize.getWidth();
    const pageHeight = pdf.internal.pageSize.getHeight();
    const imgWidth = canvas.width;
    const imgHeight = canvas.height;
    const ratio = Math.min(pageWidth / imgWidth, pageHeight / imgHeight);
    const renderWidth = imgWidth * ratio;
    const renderHeight = imgHeight * ratio;
    const offsetX = (pageWidth - renderWidth) / 2;
    const offsetY = (pageHeight - renderHeight) / 2;

    pdf.addImage(imgData, 'PNG', offsetX, offsetY, renderWidth, renderHeight, undefined, 'FAST');

    const filename = `vinayaka-v2-${getBirthStamp()}_${getCityForFilename()}.pdf`;
    pdf.save(filename);
  } catch (err) {
    console.error(err);
    alert('Failed to download PDF. Please try again.');
  }
}

// Helper to compute and append Maanti
function addMaantiPosition(targetArray, birthInfo, positions) {
  const { year, month, day, hour, minutes, city } = birthInfo;
  const { sunriseMinutes, sunsetMinutes } = getLocalSunriseSunset(year, month, day, city);
  const birthMin = hour * 60 + minutes;
  const calendarWeekday = new Date(year, month - 1, day).getDay();

  // Determine Vedic weekday index and period
  let vedicWeekday = calendarWeekday;
  let period = 'night';

  if (birthMin >= sunriseMinutes && birthMin < sunsetMinutes) {
    period = 'day';
  } else if (birthMin < sunriseMinutes) {
    vedicWeekday = (calendarWeekday + 6) % 7;
  }

  // Lookup offset and compute longitude
  const offset = MAANTI_OFFSETS[vedicWeekday][period];
  const sun = positions.find(p => p.name === 'சூரியன்');
  if (!sun) return;

  const rawLong = (sun.longitude + offset) % 360;
  const maantiLong = (rawLong + 360) % 360; // ensure positive

  // Derive nakshatra, sign, pada, lord, and house
  const nak = calculateNakshatraPada(maantiLong);
  const signIdx = Math.floor(maantiLong / 30);

  // Calculate house number from ascendant sign
  // first find the ascendant’s longitude
  const asc = positions.find(p => p.name === 'லக்னம்');
  const ascSignIdx = Math.floor(asc.longitude / 30);
  const houseNum = ((signIdx - ascSignIdx + 12) % 12) + 1;

  targetArray.push({
    name: 'மாந்தி',
    longitude: Number(maantiLong.toFixed(1)),
    zodiacSign: indianZodiacTamil[signIdx],
    nakshatraPada: `${nak.nakshatra} ${nak.pada}`,
    nakshatraLord: nakshatraLordsTamil[Math.floor(maantiLong / 13.333)],
    houseNumber: houseNum
  });
}

    // Extract and adjust time data
function extractTimeData(hour, minutes, cityInfo) {
  var zoneHours = parseFloat(cityInfo.timezone.hours) +
                  parseFloat(cityInfo.timezone.minutes / 60);
  if (cityInfo.timezone.direction === 'E') {
    zoneHours *= -1;  
  }
  var time = parseFloat(hour) + parseFloat(minutes / 60) + zoneHours;
  return { time: time, zoneHours: zoneHours };
}

    // Calculate Julian date/time factor
    function calculateDateData(year, month, day, time) {
      var jd = date2jul(month, day, year) + 0.5;
      jd += time / 24.0;
      var t = (jd - J2000) / 36525.0;
      return { jd: jd, t: t };
    }

    document.addEventListener('DOMContentLoaded', function() {
      setDateToday();      // Sets date inputs to today's date on page load
      calculatePositions(); // Calculates initial positions for today's date
    });
  </script>
</head>

<body>
  <!-- Form controls for date/time/city input -->
<div class="controls-panel">
  <div class="controls-grid">
  <div class="form-control">
    <label for="year">Year (1800-2200):</label>
    <select id="year">
      <script>
        for (let i = 1800; i <= 2200; i++) {
          document.write('<option value="' + i + '">' + i + '</option>');
        }
      </script>
    </select>
  </div>

  <div class="form-control">
    <label for="month">Month:</label>
    <select id="month">
      <option value="1">January</option>
      <option value="2">February</option>
      <option value="3">March</option>
      <option value="4">April</option>
      <option value="5">May</option>
      <option value="6">June</option>
      <option value="7">July</option>
      <option value="8">August</option>
      <option value="9">September</option>
      <option value="10">October</option>
      <option value="11">November</option>
      <option value="12">December</option>
    </select>
  </div>

  <div class="form-control">
    <label for="day">Day:</label>
    <select id="day">
      <script>
        for (let i = 1; i <= 31; i++) {
          document.write('<option value="' + i + '">' + i + '</option>');
        }
      </script>
    </select>
  </div>

  <div class="form-control">
    <label for="hour">Hour (0-23):</label>
    <select id="hour">
      <script>
        for (let i = 0; i < 24; i++) {
          document.write('<option value="' + i + '">' + i + '</option>');
        }
      </script>
    </select>
  </div>

  <div class="form-control">
    <label for="minute">Minute (0-59):</label>
    <select id="minute">
      <script>
        for (let i = 0; i < 60; i++) {
          document.write('<option value="' + i + '">' + i + '</option>');
        }
      </script>
    </select>
  </div>

<div class="form-control">
  <label for="city">City:</label>
  <select id="city">
    <option value="Chennai">Chennai</option>
    <option value="Tiruchirappalli">Tiruchirappalli</option>
    <option value="Madurai">Madurai</option>
    <option value="Vellore">Vellore</option>
    <option value="Salem">Salem</option>
    <option value="Coimbatore">Coimbatore</option>
    <option value="Krishnagiri">Krishnagiri</option>
    <option value="Tirunelveli">Tirunelveli</option>
    <option value="Kanyakumari">Kanyakumari</option>
    <option value="Hyderabad">Hyderabad</option>
    <option value="Bengaluru">Bengaluru</option>
    <option value="Thiruvananthapuram">Thiruvananthapuram</option>
    <option value="New Delhi">New Delhi</option>
    <option value="Mumbai">Mumbai</option>
    <option value="Kolkata">Kolkata</option>
    <option value="London">London</option>
    <option value="New York, NY">New York</option>
    <option value="Westlake, OH">Westlake</option>
    <option value="San Francisco, CA">San Francisco</option>
    <option value="Chicago, IL">Chicago</option>
    <option value="Houston, TX">Houston</option>
    <option value="Phoenix, AZ">Phoenix</option>
    <option value="Dubai">Dubai</option>
    <option value="Cairo">Cairo</option>
    <option value="Melbourne">Melbourne</option>
    <option value="Sydney">Sydney</option>
    <option value="Karaikudi">Karaikudi</option>
    <option value="Riyadh, Saudi Arabia">Saudi Arabia (Riyadh)</option>
  </select>
</div>

  <!-- Button to trigger calculation -->
  <div class="form-control">
    <button onclick="calculatePositions()"><b>கணக்கிடுக</b></button>
  </div>
  </div>
</div>

<div id="reportCanvas" class="report-canvas">
  <div class="report-header">
    <img src="ganesha.jpg" alt="Ganesha">
    <div class="report-header-text">
      <p class="report-title">ஸ்ரீ கற்பக விநாயகர் கணியன்</p>
      <p class="report-subtitle">by ரவிச்சந்திரன் (version 2)</p>
    </div>
  </div>

  <div class="report-panel">
    <div id="panchangInfo"></div>
  </div>

  <div class="report-panel">
    <div class="chart-container">
      <div id="chartContainer" class="chart-box">
        <!-- SVG Rasi chart inserted here -->
      </div>
      <div id="navamsaChartContainer" class="chart-box">
        <!-- SVG Navamsa chart inserted here -->
      </div>
      <div id="result" class="chart-box nakshatra-box"></div>
    </div>
  </div>

  <div class="report-panel">
    <div id="dashasContainer"></div>
  </div>

  <div class="report-actions no-export">
    <button id="copyReportBtn" type="button" onclick="copyReportToClipboard()">Copy Report</button>
    <button id="downloadPdfBtn" type="button" onclick="downloadReportPdf()">Download PDF</button>
  </div>

</div>

</body>
</html>
